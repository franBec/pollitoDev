---
author: "Franco Becvort"
title: "VPS"
date: 2025-01-27
description: "Setting up a VPS to run multiple apps declared in a docker-compose"
categories: ["Roundest Pokemon"]
thumbnail: /uploads/2025-01-27-vps/DALL·E2025-01-27114654.jpg
---

<!-- TOC -->
  * [What is a VPS?](#what-is-a-vps)
  * [Aren&rsquo;t VPS a thing of the past? Shouldn&rsquo;t we run everything serverless?](#arent-vps-a-thing-of-the-past-shouldnt-we-run-everything-serverless)
    * [The Serverless Dream can quickly become a nightmare](#the-serverless-dream-can-quickly-become-a-nightmare)
    * [Your app isn’t the next Facebook (and that’s okay)](#your-app-isnt-the-next-facebook-and-thats-okay)
  * [Let&rsquo;s setup a VPS](#lets-setup-a-vps)
    * [Pick a VPS Provider](#pick-a-vps-provider)
    * [Get a plan according to your needs](#get-a-plan-according-to-your-needs)
    * [Choose an OS and setup password and SSH](#choose-an-os-and-setup-password-and-ssh)
  * [I have my VPS up, now what?](#i-have-my-vps-up-now-what)
    * [Add a new user account](#add-a-new-user-account)
    * [Point a DNS record at the server (AKA Get a domain)](#point-a-dns-record-at-the-server-aka-get-a-domain)
    * [Add security to the VPS: remove Password Authentication on SSH](#add-security-to-the-vps-remove-password-authentication-on-ssh)
<!-- TOC -->

## What is a VPS?

A **Virtual Private Server** (VPS) is like having your own private slice of a larger server in a data center. Imagine renting an apartment in a big building: you have your own space, and you’re free to set it up however you like, but you share the building’s infrastructure (like elevators and hallways) with other tenants.

With a VPS, you get a dedicated amount of resources like CPU, RAM, and storage that are reserved just for you. This gives you the flexibility to install software, configure your environment, and control how your server runs, all without worrying about what other people are doing on their servers. It’s not a physical machine sitting in your living room, it’s hosted by a provider and accessible online, but it feels like it’s yours.

The beauty of a VPS is that it offers a middle ground between shared hosting (where resources are shared with everyone and can get crowded) and a dedicated server (where you have an entire machine to yourself, but at a much higher cost). It’s a solid option for anyone who wants control, performance, and predictability without breaking the bank.

![VPS vs. Dedicated Hosting (4 Key Differences)](/uploads/2025-01-27-vps/01_hosting_options_shared_vs_vps_vs_dedicated1.jpg)
_Image from [VPS vs. Dedicated Hosting (4 Key Differences)](https://www.dreamhost.com/blog/vps-vs-dedicated-hosting/)_

## Aren&rsquo;t VPS a thing of the past? Shouldn&rsquo;t we run everything serverless?

In an era where "serverless computing" is the buzzword of choice, it's tempting to think that Virtual Private Servers (VPS) are outdated relics of a simpler time. After all, _why deal with servers at all when you can let cloud providers handle everything for you?_

Some key responsibilities a developer must handle when managing a VPS, are typically abstracted away in serverless solutions, such as:

- **Server setup and maintenance:** You’re responsible for installing and configuring the operating system, web server, database, and other necessary software. Serverless platforms handle this automatically.
- **Security:** Tasks like applying security patches, updating software, managing firewalls, and protecting against vulnerabilities are entirely your responsibility with a VPS.
- **Scaling and resource management:** With a VPS, you must monitor and manage server resources (CPU, memory, disk space). If your app outgrows its resources, scaling up involves manual intervention, such as upgrading your VPS plan or migrating to a bigger server.
- **Uptime and monitoring:** Ensuring the server stays online and performs well during peak traffic times requires setting up monitoring tools and reacting quickly to issues like crashes or resource exhaustion.
- **Backups and disaster recovery:** While most VPS providers offer backup options, it’s often up to you to set them up and ensure they run correctly. Serverless solutions typically handle backup and failover automatically.
- **Load balancing:** If your app grows and requires multiple servers, you need to configure load balancers to distribute traffic. Serverless solutions dynamically handle this for you.
- **Networking and DNS configuration:** You need to configure network settings, domain names, and SSL certificates for secure connections. Serverless platforms streamline much of this setup.

However, before you jump on the serverless bandwagon, it's worth pausing to consider whether it's truly the best choice for your app (and your wallet). Here's why the VPS still has its place.

![serverless-vs-vps](/uploads/2025-01-27-vps/serverless-vs-vps.png)

### The Serverless Dream can quickly become a nightmare
Serverless computing promises unparalleled scalability, but that flexibility often comes with an unpredictable cost structure. A striking example of this came to light just a few months ago when [cara.app](https://cara.app/explore), a small indie project, went viral. Built using serverless functions, the app's sudden popularity led to a staggering $96,000 cloud bill for its creator.

{{< youtube SCIfWhAheVw >}}

This isn't an isolated incident. Serverless pricing is heavily based on usage, and while that can seem cost-effective at first, a spike in demand can quickly send your costs into orbit.

With a VPS, you have a predictable monthly (or even yearly) cost, giving you full control over your infrastructure and budget. You may not scale as effortlessly as with serverless, but for most apps, that's not even a requirement.

### Your app isn’t the next Facebook (and that’s okay)
The most common argument for serverless computing is the ability to scale infinitely to meet demand. While this is a great selling point for companies like Netflix or Uber, most apps won’t ever require that kind of infrastructure. 

For most indie developers or small businesses, the occasional timeout during a surge in demand is a minor inconvenience compared to the risk of an unsustainable computing bill.

It’s better to take a step back, evaluate your growth, and adapt your infrastructure thoughtfully than to gamble on instant scalability you might never fully utilize.

## Let&rsquo;s setup a VPS

### Pick a VPS Provider

When choosing a VPS provider, you’ll quickly discover there’s no shortage of options. However, three names you’ll frequently encounter in reviews, forums, and recommendations are:

- **[A2 Hosting](https://www.a2hosting.com/)**: Known for its speed-optimized servers and developer-friendly tools.
- **[Hetzner](https://www.hetzner.com/)**: A budget-friendly European provider with a strong reputation for reliability.
- **[Hostinger](https://www.hostinger.com/)**: Offers affordable plans with a user-friendly interface, ideal for beginners.

There’s no “wrong” choice here. Your decision should depend on your specific needs, such as budget, server location, customer support expectations, or scalability requirements.
I chose **Hostinger** because two of my favorite programming content creators used it in the past.

**Dreams of Code**
{{< youtube F-9KWQByeU0 >}}

**Web Dev Cody**
{{< youtube ZmL46xVdYzM >}}

### Get a plan according to your needs

Courtesy of my current employer [Devsu](https://devsu.com/), I got the _KVM2 plan_ for a 2 years term, which for the personal projects I have planned, it has good enough technical capabilities.

![hostinger-pricing](/uploads/2025-01-27-vps/hostinger-pricing.png)

You can use my discount content creator coupon code... Nah I'm not sponsored, I wish though (Hostinger hit me up!)
- Tip: Go on YouTube, search "Hostinger VPS", order by date to get recent videos, and probably if the video is a good review of a creator with many subscribers, they might have a coupon code you can use. 10% discount is always welcomed.

### Choose an OS and setup password and SSH

After obtaining the instance, choose an OS: I'm going with Ubuntu 24.04, as it is one of the most common OS when setting up a VPS.

![hostinger-select-os](/uploads/2025-01-27-vps/hostinger-select-os.png)

_I **don't** use Arch btw_.

On the next screen, you're offered a malware scanner. I left it enabled, as it seems to be lightweight and it is free.
![hostigner-malware-scanner](/uploads/2025-01-27-vps/hostigner-malware-scanner.png)

Then you set up a password for the root user. Also add a SSH Key so you can later log in through SSH.
- Hostinger will provide you with instructions on how to generate and add an SSH key in case you are not sure.

![hostinger-password](/uploads/2025-01-27-vps/hostinger-password.png)

After finishing the set-up, wait a few minutes for your VPS instance to start. Then test the log in through SSH.

```bash
ssh root@vps-instance-ip-address
```

You can find your VPS instance IP address in the Overview -> VPS information screen. From now on, I'm going to be using my VPS IP address in the examples.

![hostinger-overview](/uploads/2025-01-27-vps/hostinger-overview.png)

## I have my VPS up, now what?

### Add a new user account

Working directly as the **root user** on your VPS is widely discouraged for security and practical reasons. Here’s why creating a dedicated user account is a best practice:

- **Security risks:** The root user has unrestricted access to your entire system. If compromised (e.g., via a brute-force attack or accidental exposure), attackers can wreak havoc. A non-root user limits potential damage by operating under the *principle of least privilege*.
- **Accidental system changes:** A single typo in a command (like `rm -rf /` instead of `rm -rf ./`) can delete critical system files when run as root. A regular user account acts as a safeguard against such catastrophic mistakes.
- **Audit trails:** Using a dedicated user makes it easier to track actions in logs, especially if multiple people access the server. Root activity is harder to attribute to specific users, complicating troubleshooting.
- **SSH hardening:** Most attacks target the root user via SSH. By disabling root login and using SSH keys with a non-root account, you reduce your server’s exposure to brute-force attacks.
- **Application requirements:** Some tools and services (e.g., Docker) may refuse to run as root for security reasons. A standard user account ensures compatibility with such software.

**How to start:**
1. Create a new user (e.g., `adduser pollito`).
2. Grant sudo privileges for administrative tasks (`usermod -aG sudo pollito`).
3. Test it is working by switching to the new user (`su - pollito`) and running a test sudo command (`sudo ls /`)

### Point a DNS record at the server (AKA Get a domain)

To connect your VPS to a domain name, you’ll need to configure DNS records. You can either use an existing domain you own or purchase a new one (Hostinger offers [domain registration](https://hpanel.hostinger.com/domains/domain-checker) if you prefer an all-in-one solution). Here’s how to set it up:

1. **Prepare Your Domain**
    - Log in to your domain provider’s DNS management panel (e.g., Hostinger’s DNS dashboard).
    - Remove any existing **A records** or **CNAME records** tied to the root domain (`@` or `yourdomain.com`) that were auto-generated or are no longer needed. These often point to placeholder IPs.

2. **Add a New A Record**
    - Create a new **A record** for the root domain (`@` or `yourdomain.com`).
    - Set the **value** or **destination** field to your VPS’s public IP address.
    - Save the record.

    ![hostinger-dns](/uploads/2025-01-27-vps/hostinger-dns.png)

3. **Wait for Propagation**  
   DNS changes can take up to 24–48 hours to propagate globally. You can check progress using tools like `dig yourdomain.com` or `ping yourdomain.com` (once propagation is complete, it should resolve to your VPS IP).

**Note**: Avoid adding unrelated CNAME or A records for the root domain during this process, as they may conflict with your new configuration.

### Add security to the VPS: remove Password Authentication on SSH

Automated bots constantly scan the internet for SSH servers, attempting brute-force attacks using common credentials. To reduce the attack surface we'll remove password authentication on SSH.

Before this, is needed to ensure your non-root user has your SSH public key installed (**if not, we are going to become softlocked**). To do this, copy the SSH public key. An easy way to achieve that is to use the ssh-copy-id command:

```bash
ssh-copy-id pollito@147.93.55.247
```

- Be sure to be `logout` of the VPS, you need to have in your local machine.
- If you are in Windows, you can make this work using [Git Bash](https://git-scm.com/downloads/win).

Now try logging into the VPS and check to make sure that only the key(s) you wanted were added.

```bash
ssh pollito@147.93.55.247
```
Now, let's disable Password Authentication.

1. Edit the SSH server configuration: do `sudo vim /etc/ssh/sshd_config` and modify these lines:
   `PasswordAuthentication no
   PermitRootLogin no
   UsePAM no`
2. Hostinger-Specific adjustment.
3. Apply changes.